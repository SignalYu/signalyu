<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Mybatis(Plus) 笔记 | 信一的博客</title>
<meta name="keywords" content="工程与技术, MyBatis, Tech">
<meta name="description" content="对象关系映射 对象关系映射（Object-Relational Mapping, ORM） 是一种用于在 Model 对象和数据库之间的数据转换技术。 对象关系映射 映射文件的 namespace 要和 mapper 接口的全类名保持一致； 映射文件中 SQL 语句中的 id 要和 mapper 接口中的方法名保持一致。
基本增删改查 基本增删改查 点击查看代码 User.java UserMapper.java UserMapper.xml mybatis-config.xml jdbc.properties MyBatisTest.java pom.xml package dev.signalyu.mybatis.pojo; import lombok.AllArgsConstructor; import lombok.Data; import lombok.NoArgsConstructor; import lombok.ToString; @Data @AllArgsConstructor @NoArgsConstructor @ToString public class User { private int id; private String name; private String email; } package dev.signalyu.mybatis.mapper; import dev.signalyu.mybatis.pojo.User; import java.util.List; public interface UserMapper { int insertUser(); void updateUser(); void deleteUser(); User getUserById(); List&lt;User&gt; getAllUser(); } &lt;?">
<meta name="author" content="Signal Yu">
<link rel="canonical" href="https://signalyu.github.io/posts/4-engineering-and-technology/tech/mybatis/1-mybatis-notes/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.9ddf6c021b47a5a861a7c6af241af938775e0fc65a762930d3a2426fc59e9a5c.css" integrity="sha256-nd9sAhtHpahhp8avJBr5OHdeD8Zadikw06JCb8Wemlw=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://signalyu.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://signalyu.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://signalyu.github.io/favicon-32x32">
<link rel="apple-touch-icon" href="https://signalyu.github.io/apple-touch-icon">
<link rel="mask-icon" href="https://signalyu.github.io/favicon.io">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://signalyu.github.io/posts/4-engineering-and-technology/tech/mybatis/1-mybatis-notes/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
  

<meta property="og:title" content="Mybatis(Plus) 笔记" />
<meta property="og:description" content="对象关系映射 对象关系映射（Object-Relational Mapping, ORM） 是一种用于在 Model 对象和数据库之间的数据转换技术。 对象关系映射 映射文件的 namespace 要和 mapper 接口的全类名保持一致； 映射文件中 SQL 语句中的 id 要和 mapper 接口中的方法名保持一致。
基本增删改查 基本增删改查 点击查看代码 User.java UserMapper.java UserMapper.xml mybatis-config.xml jdbc.properties MyBatisTest.java pom.xml package dev.signalyu.mybatis.pojo; import lombok.AllArgsConstructor; import lombok.Data; import lombok.NoArgsConstructor; import lombok.ToString; @Data @AllArgsConstructor @NoArgsConstructor @ToString public class User { private int id; private String name; private String email; } package dev.signalyu.mybatis.mapper; import dev.signalyu.mybatis.pojo.User; import java.util.List; public interface UserMapper { int insertUser(); void updateUser(); void deleteUser(); User getUserById(); List&lt;User&gt; getAllUser(); } &lt;?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://signalyu.github.io/posts/4-engineering-and-technology/tech/mybatis/1-mybatis-notes/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-06-06T11:23:41+08:00" />
<meta property="article:modified_time" content="2024-06-06T11:23:41+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Mybatis(Plus) 笔记"/>
<meta name="twitter:description" content="对象关系映射 对象关系映射（Object-Relational Mapping, ORM） 是一种用于在 Model 对象和数据库之间的数据转换技术。 对象关系映射 映射文件的 namespace 要和 mapper 接口的全类名保持一致； 映射文件中 SQL 语句中的 id 要和 mapper 接口中的方法名保持一致。
基本增删改查 基本增删改查 点击查看代码 User.java UserMapper.java UserMapper.xml mybatis-config.xml jdbc.properties MyBatisTest.java pom.xml package dev.signalyu.mybatis.pojo; import lombok.AllArgsConstructor; import lombok.Data; import lombok.NoArgsConstructor; import lombok.ToString; @Data @AllArgsConstructor @NoArgsConstructor @ToString public class User { private int id; private String name; private String email; } package dev.signalyu.mybatis.mapper; import dev.signalyu.mybatis.pojo.User; import java.util.List; public interface UserMapper { int insertUser(); void updateUser(); void deleteUser(); User getUserById(); List&lt;User&gt; getAllUser(); } &lt;?"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://signalyu.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Mybatis(Plus) 笔记",
      "item": "https://signalyu.github.io/posts/4-engineering-and-technology/tech/mybatis/1-mybatis-notes/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Mybatis(Plus) 笔记",
  "name": "Mybatis(Plus) 笔记",
  "description": "对象关系映射 对象关系映射（Object-Relational Mapping, ORM） 是一种用于在 Model 对象和数据库之间的数据转换技术。 对象关系映射 映射文件的 namespace 要和 mapper 接口的全类名保持一致； 映射文件中 SQL 语句中的 id 要和 mapper 接口中的方法名保持一致。\n基本增删改查 基本增删改查 点击查看代码 User.java UserMapper.java UserMapper.xml mybatis-config.xml jdbc.properties MyBatisTest.java pom.xml package dev.signalyu.mybatis.pojo; import lombok.AllArgsConstructor; import lombok.Data; import lombok.NoArgsConstructor; import lombok.ToString; @Data @AllArgsConstructor @NoArgsConstructor @ToString public class User { private int id; private String name; private String email; } package dev.signalyu.mybatis.mapper; import dev.signalyu.mybatis.pojo.User; import java.util.List; public interface UserMapper { int insertUser(); void updateUser(); void deleteUser(); User getUserById(); List\u0026lt;User\u0026gt; getAllUser(); } \u0026lt;?",
  "keywords": [
    "工程与技术", "MyBatis", "Tech"
  ],
  "articleBody": "对象关系映射 对象关系映射（Object-Relational Mapping, ORM） 是一种用于在 Model 对象和数据库之间的数据转换技术。 对象关系映射 映射文件的 namespace 要和 mapper 接口的全类名保持一致； 映射文件中 SQL 语句中的 id 要和 mapper 接口中的方法名保持一致。\n基本增删改查 基本增删改查 点击查看代码 User.java UserMapper.java UserMapper.xml mybatis-config.xml jdbc.properties MyBatisTest.java pom.xml package dev.signalyu.mybatis.pojo; import lombok.AllArgsConstructor; import lombok.Data; import lombok.NoArgsConstructor; import lombok.ToString; @Data @AllArgsConstructor @NoArgsConstructor @ToString public class User { private int id; private String name; private String email; } package dev.signalyu.mybatis.mapper; import dev.signalyu.mybatis.pojo.User; import java.util.List; public interface UserMapper { int insertUser(); void updateUser(); void deleteUser(); User getUserById(); List getAllUser(); } \u003c?xml version=\"1.0\" encoding=\"UTF-8\" ?\u003e \u003c!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"\u003e insert into user values(null, 'Signal Yu','signal@gmail.com') update user set name = 'Signal Yu' where id = 5 delete from user where id = 3 select * from user where id = 2 select * from user \u003c?xml version=\"1.0\" encoding=\"UTF-8\" ?\u003e \u003c!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-config.dtd\"\u003e jdbc.driver=com.mysql.cj.jdbc.Driver jdbc.url=jdbc:mysql://ip_address:3306/sample_db jdbc.username=mysql_user_name jdbc.password=mysql_user_password import dev.signalyu.mybatis.mapper.UserMapper; import dev.signalyu.mybatis.pojo.User; import org.apache.ibatis.io.Resources; import org.apache.ibatis.session.SqlSession; import org.apache.ibatis.session.SqlSessionFactory; import org.apache.ibatis.session.SqlSessionFactoryBuilder; import org.junit.jupiter.api.Test; import java.io.IOException; import java.io.InputStream; import java.util.List; public class MyBatisTest { @Test public void testMybatis() throws IOException { // 加载核心配置文件 InputStream is = Resources.getResourceAsStream(\"mybatis-config.xml\"); // 获取 SqlSessionFactoryBuilder SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder(); // 获取 sqlSessionFactory SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is); // 获取 SqlSession SqlSession sqlSession = sqlSessionFactory.openSession(true); // 获取 mapper 接口对象 UserMapper mapper = sqlSession.getMapper(UserMapper.class); int result = mapper.insertUser(); mapper.updateUser(); mapper.deleteUser(); User user = mapper.getUserById(); System.out.println(user); List list = mapper.getAllUser(); list.forEach(System.out::println); sqlSession.commit(); System.out.println(\"result = \" + result); } } \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e 4.0.0 dev.signalyu mybatis-and-plus 1.0-SNAPSHOT pom demo-1 17 17 UTF-8 org.mybatis mybatis 3.5.16 org.junit.jupiter junit-jupiter-api 5.10.2 test com.mysql mysql-connector-j 8.3.0 org.projectlombok lombok 1.18.30 provided 获取参数值的两种方式 MyBatis 支持动态 SQL，其动态获取参数值的方式有 ${} 和 #{} 两种。 ${} 用于字符串替换，会导致 SQL 注入。 SELECT * FROM users WHERE username = '${username}' SELECT * FROM users WHERE username = 'signal' SELECT * FROM users WHERE username = 'signal' OR '1'='1' #{} 用于参数化查询，它通过使用占位符以避免 SQL 注入问题，并且可以提高性能（预处理语句可以缓存并被重复使用）。 SELECT * FROM users WHERE username = #{username} SELECT * FROM users WHERE username = ? 使用原则：优先使用 #{}，在不能使用 #{} 的情景下（如批量删除、动态设置表名）再使用 ${}。 @Param 使用 @Param 注解有利于提高代码可读性。\n点击查看代码 不使用 @Param 使用 @Param // UserMapper.java public interface UserMapper { List getUserByCriteria(String username, String email); } // UserMapper.xml SELECT id, username, email FROM users WHERE username = #{param1} AND email = #{param2} /** * 不使用 @Param 时，需要使用 param0, param1 和 param2 * 来分别引用 id, username 和 email */ // UserMapper.java public interface UserMapper { List getUserByCriteria(@Param(\"username\") String username, @Param(\"email\") String email); } // UserMapper.xml SELECT id, username, email FROM users WHERE username = #{username} AND email = #{email} /** * 使用了 @Param 后，可以直接使用 id, username, email * 来分别引用 id, username, email */ MyBatis 的各种查询功能 点击查看代码 查询一个实体类对象 查询一个 List 集合 查询单个数据 查询一条数据为 Map 集合 查询多条数据为 Map 集合 模糊查询 批量删除 动态设置表名 获取自增主键 // UserMapper.xml SELECT id, username, email FROM users WHERE id = #{id} // Java 代码 User user = sqlSession.selectOne(\"selectUserById\", 1); // UserMapper.xml SELECT id, username, email FROM users // Java code List users = sqlSession.selectList(\"selectAllUsers\"); // UserMapper.xml SELECT COUNT(*) FROM users // Java code int count = sqlSession.selectOne(\"countUsers\"); // UserMapper.xml SELECT id, username, email FROM users WHERE id = #{id} // Java code Map userMap = sqlSession.selectOne(\"selectUserByIdAsMap\", 1); // UserMapper.xml SELECT id, username, email FROM users // Java code List",
  "wordCount" : "2201",
  "inLanguage": "en",
  "datePublished": "2024-06-06T11:23:41+08:00",
  "dateModified": "2024-06-06T11:23:41+08:00",
  "author":{
    "@type": "Person",
    "name": "Signal Yu"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://signalyu.github.io/posts/4-engineering-and-technology/tech/mybatis/1-mybatis-notes/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "信一的博客",
    "logo": {
      "@type": "ImageObject",
      "url": "https://signalyu.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://signalyu.github.io/" accesskey="h" title="信一的博客 (Alt + H)">
                <img src="https://signalyu.github.io/apple-touch-icon.png" alt="" aria-label="logo"
                    height="40">信一的博客</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://signalyu.github.io/archives/" title="档案">
                    <span>档案</span>
                </a>
            </li>
            <li>
                <a href="https://signalyu.github.io/tags/" title="标签">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="https://signalyu.github.io/search/" title="搜索 (Alt &#43; /)" accesskey=/>
                    <span>搜索</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://signalyu.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://signalyu.github.io/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Mybatis(Plus) 笔记
    </h1>
    <div class="post-meta"><span title='2024-06-06 11:23:41 +0800 HKT'>2024年6月6日</span>&nbsp;·&nbsp;Signal Yu

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
            
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%af%b9%e8%b1%a1%e5%85%b3%e7%b3%bb%e6%98%a0%e5%b0%84" aria-label="对象关系映射">对象关系映射</a></li>
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e5%a2%9e%e5%88%a0%e6%94%b9%e6%9f%a5" aria-label="基本增删改查">基本增删改查</a></li>
                <li>
                    <a href="#%e8%8e%b7%e5%8f%96%e5%8f%82%e6%95%b0%e5%80%bc%e7%9a%84%e4%b8%a4%e7%a7%8d%e6%96%b9%e5%bc%8f" aria-label="获取参数值的两种方式">获取参数值的两种方式</a></li>
                <li>
                    <a href="#param" aria-label="@Param">@Param</a></li>
                <li>
                    <a href="#mybatis-%e7%9a%84%e5%90%84%e7%a7%8d%e6%9f%a5%e8%af%a2%e5%8a%9f%e8%83%bd" aria-label="MyBatis 的各种查询功能">MyBatis 的各种查询功能</a></li>
                <li>
                    <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e6%98%a0%e5%b0%84-resultmap" aria-label="自定义映射 resultMap">自定义映射 resultMap</a><ul>
                        
                <li>
                    <a href="#%e5%a4%9a%e5%af%b9%e4%b8%80%e6%98%a0%e5%b0%84%e5%a4%84%e7%90%86" aria-label="多对一映射处理">多对一映射处理</a></li>
                <li>
                    <a href="#%e4%b8%80%e5%af%b9%e5%a4%9a%e6%98%a0%e5%b0%84%e5%a4%84%e7%90%86" aria-label="一对多映射处理">一对多映射处理</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8a%a8%e6%80%81-sql" aria-label="动态 SQL">动态 SQL</a></li>
                <li>
                    <a href="#mybatis-plus" aria-label="MyBatis Plus">MyBatis Plus</a><ul>
                        
                <li>
                    <a href="#mybatis-plus-%e5%9f%ba%e7%a1%80" aria-label="MyBatis Plus 基础">MyBatis Plus 基础</a></li>
                <li>
                    <a href="#%e6%a0%b8%e5%bf%83%e5%8a%9f%e8%83%bd" aria-label="核心功能">核心功能</a><ul>
                        
                <li>
                    <a href="#%e6%9d%a1%e4%bb%b6%e6%9e%84%e9%80%a0%e5%99%a8" aria-label="条件构造器">条件构造器</a></li>
                <li>
                    <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89-sql" aria-label="自定义 SQL">自定义 SQL</a><ul>
                        
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e7%94%a8%e6%b3%95" aria-label="基本用法">基本用法</a></li>
                <li>
                    <a href="#%e5%a4%9a%e8%a1%a8%e5%85%b3%e8%81%94" aria-label="多表关联">多表关联</a></li></ul>
                </li>
                <li>
                    <a href="#service-%e6%8e%a5%e5%8f%a3" aria-label="Service 接口">Service 接口</a><ul>
                        
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e7%94%a8%e6%b3%95-1" aria-label="基本用法">基本用法</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="对象关系映射">对象关系映射<a hidden class="anchor" aria-hidden="true" href="#对象关系映射">#</a></h1>
<p>对象关系映射（Object-Relational Mapping, ORM） 是一种用于在 Model 对象和数据库之间的数据转换技术。<figure class="align-center ">
    <img loading="lazy" src="/img/tech/mybatis/1-mybatis.png#center" width="100%" height="100%"/> <figcaption>
            对象关系映射
        </figcaption>
</figure>

映射文件的 namespace 要和 mapper 接口的全类名保持一致；
映射文件中 SQL 语句中的 id 要和 mapper 接口中的方法名保持一致。</p>
<h1 id="基本增删改查">基本增删改查<a hidden class="anchor" aria-hidden="true" href="#基本增删改查">#</a></h1>
<p><figure class="align-center ">
    <img loading="lazy" src="/img/tech/mybatis/2-mybatis.png#center" width="100%" height="100%"/> <figcaption>
            基本增删改查
        </figcaption>
</figure>

<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>点击查看代码</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">User.java</button>



<button class="tab_btn ">UserMapper.java</button>



<button class="tab_btn ">UserMapper.xml</button>



<button class="tab_btn ">mybatis-config.xml</button>



<button class="tab_btn ">jdbc.properties</button>



<button class="tab_btn ">MyBatisTest.java</button>



<button class="tab_btn ">pom.xml</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >package dev.signalyu.mybatis.pojo;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;
import lombok.ToString;

@Data
@AllArgsConstructor
@NoArgsConstructor
@ToString
public class User {
    private int id;
    private String name;
    private String email;
}
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >package dev.signalyu.mybatis.mapper;

import dev.signalyu.mybatis.pojo.User;

import java.util.List;

public interface UserMapper {
    int insertUser();
    void updateUser();
    void deleteUser();
    User getUserById();
    List&lt;User&gt; getAllUser();
}
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;dev.signalyu.mybatis.mapper.UserMapper&quot;&gt;
    &lt;insert id=&quot;insertUser&quot;&gt;
        insert into user values(null, 'Signal Yu','signal@gmail.com')
    &lt;/insert&gt;
    &lt;update id=&quot;updateUser&quot;&gt;
        update user set name = 'Signal Yu' where id = 5
    &lt;/update&gt;
    &lt;delete id=&quot;deleteUser&quot;&gt;
        delete from user where id = 3
    &lt;/delete&gt;
    &lt;select id=&quot;getUserById&quot; resultType=&quot;dev.signalyu.mybatis.pojo.User&quot;&gt;
        select * from user where id = 2
    &lt;/select&gt;
    &lt;select id=&quot;getAllUser&quot; resultType=&quot;dev.signalyu.mybatis.pojo.User&quot;&gt;
        select * from user
    &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-xml" data-lang="xml" >&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;configuration&gt;
    &lt;!--引入properties文件--&gt;
    &lt;properties resource=&quot;jdbc.properties&quot; /&gt;

    &lt;!--设置连接数据库的环境--&gt;
    &lt;environments default=&quot;development&quot;&gt;
        &lt;environment id=&quot;development&quot;&gt;
            &lt;transactionManager type=&quot;JDBC&quot;/&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;property name=&quot;driver&quot; value=&quot;${jdbc.driver}&quot;/&gt;
                &lt;!--设置连接数据库的连接地址--&gt;
                &lt;property name=&quot;url&quot; value=&quot;${jdbc.url}&quot;/&gt;
                &lt;!--设置连接数据库的用户名--&gt;
                &lt;property name=&quot;username&quot; value=&quot;${jdbc.username}&quot;/&gt;
                &lt;!--设置连接数据库的密码--&gt;
                &lt;property name=&quot;password&quot; value=&quot;${jdbc.password}&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;
    &lt;!--引入映射文件--&gt;
    &lt;mappers&gt;
        &lt;mapper resource=&quot;mappers/UserMapper.xml&quot;/&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-toml" data-lang="toml" >jdbc.driver=com.mysql.cj.jdbc.Driver
jdbc.url=jdbc:mysql://ip_address:3306/sample_db
jdbc.username=mysql_user_name
jdbc.password=mysql_user_password
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >import dev.signalyu.mybatis.mapper.UserMapper;
import dev.signalyu.mybatis.pojo.User;
import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;
import org.junit.jupiter.api.Test;

import java.io.IOException;
import java.io.InputStream;
import java.util.List;

public class MyBatisTest {
    @Test
    public void testMybatis() throws IOException {
        // 加载核心配置文件
        InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
        // 获取 SqlSessionFactoryBuilder
        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();
        // 获取 sqlSessionFactory
        SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);
        // 获取 SqlSession
        SqlSession sqlSession = sqlSessionFactory.openSession(true);
        // 获取 mapper 接口对象
        UserMapper mapper = sqlSession.getMapper(UserMapper.class);
        int result = mapper.insertUser();
        mapper.updateUser();
        mapper.deleteUser();
        User user = mapper.getUserById();
        System.out.println(user);
        List&lt;User&gt; list = mapper.getAllUser();
        list.forEach(System.out::println);
        sqlSession.commit();
        System.out.println("result = " + result);
    }
}
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-xml" data-lang="xml" >&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;dev.signalyu&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-and-plus&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;pom&lt;/packaging&gt;
    &lt;modules&gt;
        &lt;module&gt;demo-1&lt;/module&gt;
    &lt;/modules&gt;

    &lt;properties&gt;
        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;
        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
            &lt;version&gt;3.5.16&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;!-- https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;
            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;
            &lt;version&gt;5.10.2&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;

        &lt;!-- https://mvnrepository.com/artifact/com.mysql/mysql-connector-j --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;
            &lt;version&gt;8.3.0&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;version&gt;1.18.30&lt;/version&gt;
            &lt;scope&gt;provided&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/project&gt;
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div></p>
<h1 id="获取参数值的两种方式">获取参数值的两种方式<a hidden class="anchor" aria-hidden="true" href="#获取参数值的两种方式">#</a></h1>
<ul>
<li>MyBatis 支持动态 SQL，其动态获取参数值的方式有 <code>${}</code> 和 <code>#{}</code> 两种。
<ol>
<li><code>${}</code> 用于字符串替换，会导致 SQL 注入。<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-xml" data-lang="xml" >&lt;select id=&quot;selectUser&quot; parameterType=&quot;string&quot; resultType=&quot;User&quot;&gt;
    SELECT * FROM users WHERE username = '${username}'
&lt;/select&gt;

&lt;!-- 当 username 为 "signal" 时，上述 SQL 语句变为--&gt;
SELECT * FROM users WHERE username = 'signal'

&lt;!-- 当 username 为 "signal" OR '1' = '1' 时，上述 SQL 语句变为--&gt;
SELECT * FROM users WHERE username = 'signal' OR '1'='1'
&lt;!-- 这时会导致 SQL 注入，返回结果会包括所有用户 --&gt;
</code></pre>
    </div>
</div></li>
<li><code>#{}</code> 用于参数化查询，它通过使用占位符以避免 SQL 注入问题，并且可以提高性能（预处理语句可以缓存并被重复使用）。<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-xml" data-lang="xml" >&lt;select id=&quot;selectUser&quot; parameterType=&quot;string&quot; resultType=&quot;User&quot;&gt;
    SELECT * FROM users WHERE username = #{username}
&lt;/select&gt;

&lt;!-- 如果 username 为 "signal"，MyBatis 会先将上述 SQL 语句解释为： --&gt;
SELECT * FROM users WHERE username = ?
&lt;!-- 然后再将值 "signal" 绑定到占位符中 --&gt;
</code></pre>
    </div>
</div></li>
<li>使用原则：优先使用 <code>#{}</code>，在不能使用 <code>#{}</code> 的情景下（如批量删除、动态设置表名）再使用 <code>${}</code>。</li>
</ol>
</li>
</ul>
<h1 id="param">@Param<a hidden class="anchor" aria-hidden="true" href="#param">#</a></h1>
<p>使用 @Param 注解有利于提高代码可读性。</p>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>点击查看代码</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">不使用 @Param</button>



<button class="tab_btn ">使用 @Param</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-bash" data-lang="bash" >// UserMapper.java
public interface UserMapper {
    List&lt;User&gt; getUserByCriteria(String username, String email);
}

// UserMapper.xml
&lt;select id=&quot;getUserByCriteria&quot; resultType=&quot;User&quot;&gt;
    SELECT id, username, email 
    FROM users 
    WHERE username = #{param1} AND email = #{param2}
&lt;/select&gt;
/**
 * 不使用 @Param 时，需要使用 param0, param1 和 param2
 * 来分别引用 id, username 和 email
 */
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-bash" data-lang="bash" >// UserMapper.java
public interface UserMapper {
    List&lt;User&gt; getUserByCriteria(@Param("username") String username, @Param("email") String email);
}

// UserMapper.xml
&lt;select id=&quot;getUserByCriteria&quot; resultType=&quot;User&quot;&gt;
    SELECT id, username, email 
    FROM users 
    WHERE username = #{username} AND email = #{email}
&lt;/select&gt;
/**
 * 使用了 @Param 后，可以直接使用 id, username, email 
 * 来分别引用 id, username, email
 */
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<h1 id="mybatis-的各种查询功能">MyBatis 的各种查询功能<a hidden class="anchor" aria-hidden="true" href="#mybatis-的各种查询功能">#</a></h1>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>点击查看代码</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">查询一个实体类对象</button>



<button class="tab_btn ">查询一个 List 集合</button>



<button class="tab_btn ">查询单个数据</button>



<button class="tab_btn ">查询一条数据为 Map 集合</button>



<button class="tab_btn ">查询多条数据为 Map 集合</button>



<button class="tab_btn ">模糊查询</button>



<button class="tab_btn ">批量删除</button>



<button class="tab_btn ">动态设置表名</button>



<button class="tab_btn ">获取自增主键</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >// UserMapper.xml
&lt;select id=&quot;selectUserById&quot; parameterType=&quot;int&quot; resultType=&quot;User&quot;&gt;
    SELECT id, username, email FROM users WHERE id = #{id}
&lt;/select&gt;

// Java 代码
User user = sqlSession.selectOne("selectUserById", 1);
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >// UserMapper.xml
&lt;select id=&quot;selectAllUsers&quot; resultType=&quot;User&quot;&gt;
    SELECT id, username, email FROM users
&lt;/select&gt;

// Java code
List&lt;User&gt; users = sqlSession.selectList("selectAllUsers");
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >// UserMapper.xml
&lt;!-- Mapper XML --&gt;
&lt;select id=&quot;countUsers&quot; resultType=&quot;int&quot;&gt;
    SELECT COUNT(*) FROM users
&lt;/select&gt;

// Java code
int count = sqlSession.selectOne("countUsers");
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >// UserMapper.xml
&lt;select id=&quot;selectUserByIdAsMap&quot; parameterType=&quot;int&quot; resultType=&quot;map&quot;&gt;
    SELECT id, username, email FROM users WHERE id = #{id}
&lt;/select&gt;

// Java code
Map&lt;String, Object&gt; userMap = sqlSession.selectOne("selectUserByIdAsMap", 1);
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >// UserMapper.xml
&lt;select id=&quot;selectAllUsersAsMap&quot; resultType=&quot;map&quot;&gt;
    SELECT id, username, email FROM users
&lt;/select&gt;

// Java code
List&lt;Map&lt;String, Object&gt;&gt; usersMapList = sqlSession.selectList("selectAllUsersAsMap");
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >// Usermaper.xml
&lt;select id=&quot;selectUsersByUsernameLike&quot; parameterType=&quot;string&quot; resultType=&quot;User&quot;&gt;
    SELECT id, username, email FROM users WHERE username LIKE CONCAT('%', #{username}, '%')
&lt;/select&gt;

// Java code
List&lt;User&gt; users = sqlSession.selectList(&quot;selectUsersByUsernameLike&quot;, &quot;john&quot;);
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >// UserMapper.xml
&lt;delete id=&quot;deleteUsersByIds&quot; parameterType=&quot;list&quot;&gt;
    DELETE FROM users WHERE id IN
    &lt;foreach item=&quot;id&quot; collection=&quot;list&quot; open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt;
        #{id}
    &lt;/foreach&gt;
&lt;/delete&gt;

// Java code
List&lt;Integer&gt; ids = Arrays.asList(1, 2, 3);
sqlSession.delete("deleteUsersByIds", ids);
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >// UserMapper.xml
&lt;select id=&quot;selectFromDynamicTable&quot; parameterType=&quot;map&quot; resultType=&quot;map&quot;&gt;
    SELECT * FROM ${tableName}
&lt;/select&gt;

// Java code
Map&lt;String, Object&gt; params = new HashMap<>();
params.put("tableName", "users");
List&lt;Map&lt;String, Object&gt; result = sqlSession.selectList("selectFromDynamicTable", params);
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >// UserMapper.xml
&lt;insert id=&quot;insertUser&quot; parameterType=&quot;User&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt;
    INSERT INTO users (username, email) VALUES (#{username}, #{email})
&lt;/insert&gt;

// Java code
User user = new User();
user.setUsername("signal");
user.setEmail("signal@example.com");
sqlSession.insert("insertUser", user);
int newUserId = user.getId(); // Get the auto-incremented ID
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<h1 id="自定义映射-resultmap">自定义映射 resultMap<a hidden class="anchor" aria-hidden="true" href="#自定义映射-resultmap">#</a></h1>
<h2 id="多对一映射处理">多对一映射处理<a hidden class="anchor" aria-hidden="true" href="#多对一映射处理">#</a></h2>
<figure class="align-center ">
    <img loading="lazy" src="/img/tech/mybatis/3-mybatis.png#center" width="100%" height="100%"/> <figcaption>
            数据库表结构
        </figcaption>
</figure>

<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>点击查看代码</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">User.java</button>



<button class="tab_btn ">Order.java</button>



<button class="tab_btn ">UserMapper.java</button>



<button class="tab_btn ">OrderMapper.java</button>



<button class="tab_btn ">mybatis-config.xml</button>



<button class="tab_btn ">jdbc.properties</button>



<button class="tab_btn ">UserMaper.xml</button>



<button class="tab_btn ">OrderMaper.xml</button>



<button class="tab_btn ">MyBatisTest.java</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >package dev.signalyu.mybatis.pojo;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;
import lombok.ToString;

@Data
@NoArgsConstructor
@AllArgsConstructor
@ToString
public class User {
    private Integer id;
    private String username;
    private String email;
}
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >package dev.signalyu.mybatis.pojo;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;
import lombok.ToString;

@Data
@AllArgsConstructor
@NoArgsConstructor
@ToString
public class Order {
    private Integer id;
    private String orderNumber;
    private User user;
}
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >package dev.signalyu.mybatis.mappers;

import dev.signalyu.mybatis.pojo.User;

public interface UserMapper {
    User selectUserById(Integer id);
}
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >package dev.signalyu.mybatis.mappers;

import dev.signalyu.mybatis.pojo.Order;

public interface OrderMapper {
    Order selectOrderById(Integer id);
}
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-xml" data-lang="xml" >&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;configuration&gt;
    &lt;!--引入properties文件--&gt;
    &lt;properties resource=&quot;jdbc.properties&quot; /&gt;

    &lt;!--设置连接数据库的环境--&gt;
    &lt;environments default=&quot;development&quot;&gt;
        &lt;environment id=&quot;development&quot;&gt;
            &lt;transactionManager type=&quot;JDBC&quot;/&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;property name=&quot;driver&quot; value=&quot;${jdbc.driver}&quot;/&gt;
                &lt;!--设置连接数据库的连接地址--&gt;
                &lt;property name=&quot;url&quot; value=&quot;${jdbc.url}&quot;/&gt;
                &lt;!--设置连接数据库的用户名--&gt;
                &lt;property name=&quot;username&quot; value=&quot;${jdbc.username}&quot;/&gt;
                &lt;!--设置连接数据库的密码--&gt;
                &lt;property name=&quot;password&quot; value=&quot;${jdbc.password}&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;
    &lt;!--引入映射文件--&gt;
    &lt;mappers&gt;
        &lt;mapper resource=&quot;mappers/OrderMapper.xml&quot;/&gt;
        &lt;mapper resource=&quot;mappers/UserMapper.xml&quot;/&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-bash" data-lang="bash" >jdbc.driver=com.mysql.cj.jdbc.Driver
jdbc.url=jdbc:mysql://192.168.252.140:3306/sample_db
jdbc.username=mysql_user_name
jdbc.password=mysql_user_password
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-xml" data-lang="xml" >&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;dev.signalyu.mybatis.mappers.UserMapper&quot;&gt;
    &lt;select id=&quot;selectUserById&quot; resultType=&quot;dev.signalyu.mybatis.pojo.User&quot;&gt;
        SELECT * FROM users WHERE id = #{id}
    &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-xml" data-lang="xml" >&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;dev.signalyu.mybatis.mappers.OrderMapper&quot;&gt;
    &lt;select id=&quot;selectOrderById&quot; resultMap=&quot;orderResultMap&quot;&gt;
        SELECT o.id AS order_id, o.order_number, u.id AS user_id, u.username, u.email
        FROM orders o
        LEFT JOIN users u ON o.user_id = u.id
        WHERE o.id = #{id}
    &lt;/select&gt;

    &lt;resultMap id=&quot;orderResultMap&quot; type=&quot;dev.signalyu.mybatis.pojo.Order&quot;&gt;
        &lt;id property=&quot;id&quot; column=&quot;order_id&quot;/&gt;
        &lt;result property=&quot;orderNumber&quot; column=&quot;order_number&quot;/&gt;
        &lt;association property=&quot;user&quot; javaType=&quot;dev.signalyu.mybatis.pojo.User&quot;&gt;
            &lt;id property=&quot;id&quot; column=&quot;user_id&quot;/&gt;
            &lt;result property=&quot;username&quot; column=&quot;username&quot;/&gt;
            &lt;result property=&quot;email&quot; column=&quot;email&quot;/&gt;
        &lt;/association&gt;
    &lt;/resultMap&gt;
&lt;/mapper&gt;
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >import dev.signalyu.mybatis.mappers.OrderMapper;
import dev.signalyu.mybatis.pojo.Order;
import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;
import org.junit.jupiter.api.Test;

import java.io.IOException;
import java.io.InputStream;

public class MyBatisTest {

    @Test
    public void testMyBatis() throws IOException {
        String resource = "mybatis-config.xml";
        InputStream inputStream = Resources.getResourceAsStream(resource);
        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);

        try (SqlSession session = sqlSessionFactory.openSession()) {
            OrderMapper orderMapper = session.getMapper(OrderMapper.class);
            Order order = orderMapper.selectOrderById(1);
            System.out.println("Order Number: " + order.getOrderNumber());
            System.out.println("User Name: " + order.getUser().getUsername());
            System.out.println("User Email: " + order.getUser().getEmail());
        }
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<h2 id="一对多映射处理">一对多映射处理<a hidden class="anchor" aria-hidden="true" href="#一对多映射处理">#</a></h2>
<figure class="align-center ">
    <img loading="lazy" src="/img/tech/mybatis/4-mybatis.png#center" width="100%" height="100%"/> <figcaption>
            数据库表结构
        </figcaption>
</figure>

<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>点击查看代码</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">User.java</button>



<button class="tab_btn ">Order.java</button>



<button class="tab_btn ">UserMapper.java</button>



<button class="tab_btn ">mybatis-config.xml</button>



<button class="tab_btn ">jdbc.properties</button>



<button class="tab_btn ">UserMapper.xml</button>



<button class="tab_btn ">MyBatisTest.java</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >package dev.signalyu.mybatis.pojo;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;
import lombok.ToString;

import java.util.List;

@Data
@NoArgsConstructor
@AllArgsConstructor
@ToString
public class User {
    private Integer id;
    private String username;
    private String email;
    private List&lt;Order&gt; orders;
}
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >package dev.signalyu.mybatis.pojo;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;
import lombok.ToString;

@Data
@AllArgsConstructor
@NoArgsConstructor
@ToString
public class Order {
    private Integer id;
    private String orderNumber;
}
</code></pre>
    </div>
</div>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >package dev.signalyu.mybatis.mappers;

import dev.signalyu.mybatis.pojo.User;

import java.util.List;

public interface
UserMapper {
    User selectUserById(Integer id);

    List&lt;User&gt; selectAllUsers();
}
</code></pre>
    </div>
</div>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-xml" data-lang="xml" >&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;configuration&gt;
    &lt;!--引入properties文件--&gt;
    &lt;properties resource=&quot;jdbc.properties&quot; /&gt;

    &lt;!--设置连接数据库的环境--&gt;
    &lt;environments default=&quot;development&quot;&gt;
        &lt;environment id=&quot;development&quot;&gt;
            &lt;transactionManager type=&quot;JDBC&quot;/&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;property name=&quot;driver&quot; value=&quot;${jdbc.driver}&quot;/&gt;
                &lt;!--设置连接数据库的连接地址--&gt;
                &lt;property name=&quot;url&quot; value=&quot;${jdbc.url}&quot;/&gt;
                &lt;!--设置连接数据库的用户名--&gt;
                &lt;property name=&quot;username&quot; value=&quot;${jdbc.username}&quot;/&gt;
                &lt;!--设置连接数据库的密码--&gt;
                &lt;property name=&quot;password&quot; value=&quot;${jdbc.password}&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;
    &lt;!--引入映射文件--&gt;
    &lt;mappers&gt;
        &lt;mapper resource=&quot;mappers/UserMapper.xml&quot;/&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;
</code></pre>
    </div>
</div>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-bash" data-lang="bash" >jdbc.driver=com.mysql.cj.jdbc.Driver
jdbc.url=jdbc:mysql://192.168.252.140:3306/sample_db
jdbc.username=mysql_user_name
jdbc.password=mysql_user_password
</code></pre>
    </div>
</div>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-xml" data-lang="xml" >&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;dev.signalyu.mybatis.mappers.UserMapper&quot;&gt;
    &lt;select id=&quot;selectUserById&quot; resultMap=&quot;userResultMap&quot;&gt;
        SELECT u.id AS user_id, u.username, u.email, o.id AS order_id, o.order_number
        FROM users u
                 LEFT JOIN orders o ON u.id = o.user_id
        WHERE u.id = #{id}
    &lt;/select&gt;

    &lt;select id=&quot;selectAllUsers&quot; resultMap=&quot;userResultMap&quot;&gt;
        SELECT u.id AS user_id, u.username, u.email, o.id AS order_id, o.order_number
        FROM users u
                 LEFT JOIN orders o ON u.id = o.user_id
    &lt;/select&gt;

    &lt;resultMap id=&quot;userResultMap&quot; type=&quot;dev.signalyu.mybatis.pojo.User&quot;&gt;
        &lt;id property=&quot;id&quot; column=&quot;user_id&quot;/&gt;
        &lt;result property=&quot;username&quot; column=&quot;username&quot;/&gt;
        &lt;result property=&quot;email&quot; column=&quot;email&quot;/&gt;
        &lt;collection property=&quot;orders&quot; ofType=&quot;dev.signalyu.mybatis.pojo.Order&quot;&gt;
            &lt;id property=&quot;id&quot; column=&quot;order_id&quot;/&gt;
            &lt;result property=&quot;orderNumber&quot; column=&quot;order_number&quot;/&gt;
        &lt;/collection&gt;
    &lt;/resultMap&gt;
&lt;/mapper&gt;
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-java" data-lang="java" >import dev.signalyu.mybatis.mappers.UserMapper;
import dev.signalyu.mybatis.pojo.Order;
import dev.signalyu.mybatis.pojo.User;
import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;
import org.junit.jupiter.api.Test;

import java.io.IOException;
import java.io.InputStream;
import java.util.List;

public class MyBatisTest {

    @Test
    public void testMyBatis() throws IOException {
        String resource = "mybatis-config.xml";
        try (InputStream inputStream = Resources.getResourceAsStream(resource)) {
            SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);
            try (SqlSession session = sqlSessionFactory.openSession()) {
                UserMapper userMapper = session.getMapper(UserMapper.class);

                // 查询单个用户及其订单
                User user = userMapper.selectUserById(1);
                System.out.println("User: " + user.getUsername());
                for (Order order : user.getOrders()) {
                    System.out.println("Order: " + order.getOrderNumber());
                }

                System.out.println("========================");

                // 查询所有用户及其订单
                List&lt;User&gt; users = userMapper.selectAllUsers();
                for (User u : users) {
                    System.out.println("User: " + u.getUsername());
                    for (Order order : u.getOrders()) {
                        System.out.println("Order: " + order.getOrderNumber());
                    }
                }
            }
        }
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<h1 id="动态-sql">动态 SQL<a hidden class="anchor" aria-hidden="true" href="#动态-sql">#</a></h1>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>点击查看代码</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">if</button>



<button class="tab_btn ">where</button>



<button class="tab_btn ">trim</button>



<button class="tab_btn ">choose-when-otherwise</button>



<button class="tab_btn ">foreach</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-xml" data-lang="xml" >&lt;select id=&quot;findUsers&quot; resultType=&quot;User&quot;&gt;
    SELECT id, username, email
    FROM users
    WHERE 1 = 1
    &lt;if test=&quot;username != null&quot;&gt;
        AND username = #{username}
    &lt;/if&gt;
    &lt;if test=&quot;email != null&quot;&gt;
        AND email = #{email}
    &lt;/if&gt;
&lt;/select&gt;
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-xml" data-lang="xml" >&lt;select id=&quot;findUsers&quot; resultType=&quot;User&quot;&gt;
    SELECT id, username, email
    FROM users
    &lt;where&gt;
        &lt;if test=&quot;username != null&quot;&gt;
            AND username = #{username}
        &lt;/if&gt;
        &lt;if test=&quot;email != null&quot;&gt;
            AND email = #{email}
        &lt;/if&gt;
    &lt;/where&gt;
&lt;/select&gt;
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-xml" data-lang="xml" >&lt;select id=&quot;findUsers&quot; resultType=&quot;User&quot;&gt;
    SELECT id, username, email
    FROM users
    &lt;trim prefix=&quot;WHERE&quot; prefixOverrides=&quot;AND |OR &quot;&gt;
        &lt;if test=&quot;username != null&quot;&gt;
            AND username = #{username}
        &lt;/if&gt;
        &lt;if test=&quot;email != null&quot;&gt;
            AND email = #{email}
        &lt;/if&gt;
    &lt;/trim&gt;
&lt;/select&gt;
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-xml" data-lang="xml" >&lt;select id=&quot;findUsers&quot; resultType=&quot;User&quot;&gt;
    SELECT id, username, email
    FROM users
    &lt;where&gt;
        &lt;choose&gt;
            &lt;when test=&quot;username != null&quot;&gt;
                username = #{username}
            &lt;/when&gt;
            &lt;when test=&quot;email != null&quot;&gt;
                email = #{email}
            &lt;/when&gt;
            &lt;otherwise&gt;
                1 = 1
            &lt;/otherwise&gt;
        &lt;/choose&gt;
    &lt;/where&gt;
&lt;/select&gt;
</code></pre>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block ">
        <pre><code class="language-xml" data-lang="xml" >&lt;select id=&quot;findUsersByIds&quot; resultType=&quot;User&quot;&gt;
    SELECT id, username, email
    FROM users
    WHERE id IN
    &lt;foreach item=&quot;id&quot; collection=&quot;list&quot; open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt;
        #{id}
    &lt;/foreach&gt;
&lt;/select&gt;
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<h1 id="mybatis-plus">MyBatis Plus<a hidden class="anchor" aria-hidden="true" href="#mybatis-plus">#</a></h1>
<h2 id="mybatis-plus-基础">MyBatis Plus 基础<a hidden class="anchor" aria-hidden="true" href="#mybatis-plus-基础">#</a></h2>
<ul>
<li>MyBatis Plus 基本使用步骤：
<ol>
<li>引入 MyBatis Plus 依赖</li>
<li>定义 Mapper 并继承 BaseMapper<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >public interface UserMapper extends BaseMapper&lt;User&gt; {
}

@SpringBootTest
class UserMapperTest {

    @Autowired
    private UserMapper userMapper;

    @Test
    void testInsert() {
        User user = new User();
        user.setId(5L);
        user.setUsername("Signal");
        user.setPassword("123456");
        user.setCreateTime(LocalDateTime.now());
        user.setUpdateTime(LocalDateTime.now());
        userMapper.insert(user);
    }

    @Test
    void testSelectById() {
        User user = userMapper.selectById(5L);
        System.out.println("user = " + user);
    }

    @Test
    void testSelectByIds() {
        List&lt;User&gt; users = userMapper.selectBatchIds(List.of(1L, 2L, 3L, 4L, 5L));
        users.forEach(System.out::println);
    }

    @Test
    void testUpdateById() {
        User user = new User();
        user.setId(5L);
        user.setBalance(20000);
        userMapper.updateById(user);
    }

    @Test
    void testDelete() {
        userMapper.deleteById(5L);
    }
}
</code></pre>
    </div>
</div></li>
</ol>
</li>
<li>常见注解：
<ol>
<li><code>@TableName</code>：表名注解，标识实体类对应的表<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >@TableName("user")
public class User {
    private Long id;
    private String name;
}
</code></pre>
    </div>
</div></li>
<li><code>@TableId</code>：主键注解，标识实体类中的主键字段<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >@TableName("user")
public class User {
    @TableId
    private Long id;
    private String name;
}
</code></pre>
    </div>
</div></li>
<li><code>@TableField</code>：普通字段注解<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >@TableName("user")
public class User {
    @TableId
    private Long id;
    private String name;
    private Integer age;
    @TableField("isMarried")
    private Boolean isMarried;
}
</code></pre>
    </div>
</div></li>
</ol>
</li>
</ul>
<h2 id="核心功能">核心功能<a hidden class="anchor" aria-hidden="true" href="#核心功能">#</a></h2>
<h3 id="条件构造器">条件构造器<a hidden class="anchor" aria-hidden="true" href="#条件构造器">#</a></h3>
<p>MyBatis Plus 中的 <code>BaseMapper</code> 接口中提供的相关方法支持复杂 where 条件的 CRUD。</p>
<ol>
<li>QueryWrapper：<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >// 查询出名字中包含 s 字符且存款大于等于 1000 元的用户
@Test
void testQueryWrapper() {
    // 1.构建查询条件 where name like "%s%" AND balance >= 1000
    QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;User&gt;()
            .select("id", "username", "balance")
            .like("username", "s")
            .ge("balance", 1000);
    // 2.查询数据
    List&lt;User&gt; users = userMapper.selectList(wrapper);
    users.forEach(System.out::println);
}

// 更新用户名为 signal 的用户的余额为 2000
@Test
void testUpdateByQueryWrapper() {
    // 构建查询条件 where name = "Signal"
    QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;User&gt;().eq("username", "Siganl");
    2.更新数据
    User user = new User();
    user.setBalance(2000);
    userMapper.update(user, wrapper);
}
</code></pre>
    </div>
</div></li>
<li>UpdateWrapper：<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >// 更新 id 为 1,2,4 的用户的余额，扣 200，对应的 SQL 语句如下：
// UPDATE user SET balance = balance - 200 WHERE id in (1, 2, 4)

@Test
void testUpdateWrapper() {
    List&lt;Long&gt; ids = List.of(1L, 2L, 4L);
    // 1.生成SQL
    UpdateWrapper&lt;User&gt; wrapper = new UpdateWrapper&lt;User&gt;()
            .setSql("balance = balance - 200") // SET balance = balance - 200
            .in("id", ids); // WHERE id in (1, 2, 4)
        // 2. 更新数据
    userMapper.update(null, wrapper);
}
</code></pre>
    </div>
</div></li>
<li>LambdaQueryWrapper：QueryWrapper 和 UpdateWrapper 在构造条件时需要明确指定字段名称，这在编程规范中是不推荐的。LambdaQueryWrapper 可以构造不需要明确指定字段名称的条件。<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >@Test
void testLambdaQueryWrapper() {
    // 1.构建条件 WHERE username LIKE "%s%" AND balance >= 1000
    QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();
    wrapper.lambda()
            .select(User::getId, User::getUsername, User::getInfo, User::getBalance)
            .like(User::getUsername, "s")
            .ge(User::getBalance, 1000);
    // 2.查询
    List&lt;User&gt; users = userMapper.selectList(wrapper);
    users.forEach(System.out::println);
}
</code></pre>
    </div>
</div></li>
</ol>
<h3 id="自定义-sql">自定义 SQL<a hidden class="anchor" aria-hidden="true" href="#自定义-sql">#</a></h3>
<h4 id="基本用法">基本用法<a hidden class="anchor" aria-hidden="true" href="#基本用法">#</a></h4>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >// 更新 id 为 1,2,4 的用户的余额，扣 200，对应的 SQL 语句如下：
// UPDATE user SET balance = balance - 200 WHERE id in (1, 2, 4)
@Test
void testUpdateWrapper() {
    List&lt;Long&gt; ids = List.of(1L, 2L, 4L);
    // 1.生成SQL
    UpdateWrapper&lt;User&gt; wrapper = new UpdateWrapper&lt;User&gt;()
            .setSql("balance = balance - 200") // SET balance = balance - 200
            .in("id", ids); // WHERE id in (1, 2, 4)
        // 2. 更新数据
    userMapper.update(null, wrapper);
}

// 写法在某些企业也是不允许的，
// 因为SQL语句最好都维护在持久层，
// 而不是业务层。改写上述代码如下：
@Test
void testCustomWrapper() {
    // 1.准备自定义查询条件
    List&lt;Long&gt; ids = List.of(1L, 2L, 4L);
    QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;User&gt;().in("id", ids);

    // 2.调用mapper的自定义方法，直接传递Wrapper
    userMapper.deductBalanceByIds(200, wrapper);
}

public interface UserMapper extends BaseMapper&lt;User&gt; {
    @Select("UPDATE user SET balance = balance - #{money} ${ew.customSqlSegment}")
    void deductBalanceByIds(@Param("money") int money, @Param("ew") QueryWrapper&lt;User&gt; wrapper);
}
</code></pre>
    </div>
</div>
<h4 id="多表关联">多表关联<a hidden class="anchor" aria-hidden="true" href="#多表关联">#</a></h4>
<p>在 MyBatis Plus 中，可以利用 Wrapper 来构建查询条件，同时手动实现 <code>SELECT</code> 及 <code>FROM</code> 部分来实现多表查询。</p>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >// MyBatis 中的多表查询
&lt;select id=&quot;queryUserByIdAndAddr&quot; resultType=&quot;com.itheima.mp.domain.po.User&quot;&gt;
    SELECT *
    FROM user u
    INNER JOIN address a ON u.id = a.user_id
    WHERE u.id
    &lt;foreach collection=&quot;ids&quot; separator=&quot;,&quot; item=&quot;id&quot; open=&quot;IN (&quot; close=&quot;)&quot;&gt;
        #{id}
    &lt;/foreach&gt;
    AND a.city = #{city}
&lt;/select&gt;

// 自定义 SQL 语句
@Test
void testCustomJoinWrapper() {
    // 1.准备自定义查询条件
    QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;User&gt;()
            .in(&quot;u.id&quot;, List.of(1L, 2L, 4L))
            .eq(&quot;a.city&quot;, &quot;北京&quot;);

    // 2.调用 mapper 的自定义方法
    List&lt;User&gt; users = userMapper.queryUserByWrapper(wrapper);

    users.forEach(System.out::println);
}
// 在 UserMapper 中定义方法
@Select(&quot;SELECT u.* FROM user u INNER JOIN address a ON u.id = a.user_id ${ew.customSqlSegment}&quot;)
List&lt;User&gt; queryUserByWrapper(@Param(&quot;ew&quot;)QueryWrapper&lt;User&gt; wrapper);
</code></pre>
    </div>
</div>
<h3 id="service-接口">Service 接口<a hidden class="anchor" aria-hidden="true" href="#service-接口">#</a></h3>
<p>MyBatis Plus 提供了通用的 Service 接口及默认实现，封装了一些常用的 service 模板方法。通用接口为IService，默认实现为 ServiceImpl，其中封装的方法可以分为以下几类：save（新增）、remove（删除）、update（更新）、get（查询单个结果）、list（查询集合结果）、count（计数）和 page（分页查询）。</p>
<h4 id="基本用法-1">基本用法<a hidden class="anchor" aria-hidden="true" href="#基本用法-1">#</a></h4>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://signalyu.github.io/tags/%E5%B7%A5%E7%A8%8B%E4%B8%8E%E6%8A%80%E6%9C%AF/">工程与技术</a></li>
      <li><a href="https://signalyu.github.io/tags/mybatis/">MyBatis</a></li>
      <li><a href="https://signalyu.github.io/tags/tech/">Tech</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://signalyu.github.io/posts/1-natural-science/math/calculus/4-derivative-and-differential/">
    <span class="title">« 上一页</span>
    
    <br>
    <span>导数与微分</span>
  </a>
  <a class="next" href="https://signalyu.github.io/posts/4-engineering-and-technology/tech/c/1-array-and-pointer-in-c/">
    <span class="title">下一页 »</span>
    
    <br>
    <span>C 语言中的数组与指针</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://signalyu.github.io/">信一的博客</a></span> · 
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>

</body>
</html>
